<!-- templates/login.html -->

{% extends "page.html" %}
{% if announcement_login %}
{% set announcement = announcement_login %}
{% endif %}

{% block login_widget %}
{% endblock %}

{% block main %}
  <img src="https://om-assets-h3f2axhubqdkbreg.z01.azurefd.net/docs-assets/full_gradient_2.jpeg" alt="OpenMined Hero" class="hero-content">
{% block login %}
<div id="login-main" class="login-main">
  {% if custom_html %}
  {{ custom_html | safe }}
  {% elif login_service %}
  <div id="" class="login-container">
    <div class="service-container">
      <div class="service-title">
        <p class="try-text">TRY OUT PYSYFT</p>
        <p class="connect-text">Create or connect to your session</p>
      </div>
      <div class="service-session">
        <p>The session is unique to you and you can come back anytime - all you need is to specify a sessionname and
          password
          for it.</p>
      </div>
      <div id="service-form" class="service-form">
        <form action="{{ authenticator_login_url | safe }}" method="post">
          <div class="form-item">
            <label for="sessionname" class="form-label">Username:</label>
            <input type="text" class="form-input" name="sessionname" id="sessionname" required>
          </div>
          <div class="form-item">
            <label for="password" class="form-label">Password:</label>
            <input type="text" class="form-input" name="password" id="password" required>
          </div>
          <div class="form-item">
            <button type="submit" class="form-button">Start my session</button>
          </div>
          <div class="form-list">
            <ul>
              <li>If lost, session credentials cannot be recovered.</li>
              <li>Do not put sensitive data or information in this environment.</li>
            </ul>
          </div>
        </form>
      </div>
    </div>
    <div class="service-text">
      <p>Get started using our live JupyterHub.</p>
    </div>
  </div>
{% else %}
<div id="" class="login-container">
  <div class="service-container">
    <div class="service-title">
      <p class="try-text">TRY OUT PYSYFT</p>
      <p class="connect-text">Create or connect to your session</p>
    </div>
    <div class="service-session">
      <p>The session is unique to you and you can come back anytime - all you need is to specify a session name for it.</p>
    </div>
    <div id="service-form" class="service-form">
      <form action="{{ authenticator_login_url | safe }}" method="post" role="form">
        <input type="hidden" name="_xsrf" value="{{ xsrf }}" />
        <div class="form-item">
          <label for="sessionname" class="form-label">Session Name:</label>
          <input 
            type="text" 
            class="form-input" 
            name="sessionname" 
            id="sessionname" 
            autocomplete="sessionname" 
            required 
            minlength="3"
            maxlength="30"
            pattern="^[a-zA-Z0-9\-._]{3,30}$"
            title="Session name must be 3 - 30 characters and may only contain letters, numbers, hyphens, dots, and underscores."
          >
        </div>
        <!-- <div class="form-item">
          <label for="password" class="form-label">Password:</label>
          <input 
            type="password" 
            class="form-input" 
            name="password" 
            id="password" 
            autocomplete="current-password" 
            required 
            minlength="6"
            maxlength="12"
            pattern="^[a-zA-Z0-9\-._]{6,12}$"
            title="Password must be 6-12 characters."
          >
        </div> -->
        <div class="form-item">
          <button type="submit" class="form-button">Start my session</button>
        </div>
        <div class="form-list">
          <ul>
            <li>If lost, session credentials cannot be recovered.</li>
            <li>Do not put sensitive data or information in this environment.</li>
          </ul>
        </div>
      </form>
    </div>
  </div>
  <div class="service-text">
    <p>Get started using our live JupyterHub.</p>
  </div>
</div>
{% endif %}
</div>
<!-- custom footer -->
<footer class='footer'>
  <div>
    <img src="https://om-assets-h3f2axhubqdkbreg.z01.azurefd.net/docs-assets/OpenMined-icon.png" alt="Example Image" class="footer-icon">
  </div>
  <div>
    <span>&copy; </span>
    <span id="year"></span> 
    <a href="https://openmined.org" target="_blank" rel="noopener">OpenMined Foundation.</a>
  </div>
</footer>
<!-- end of custom footer -->
{% endblock login %}

{% endblock %}

{% block stylesheet %}
{{ super() }}
<style>
  /* Import the Google Font */
  @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap');
  @import url("https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&amp;display=swap");

  *,
  ::after,
  ::before,
  html,
  body {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }

  html,
  body {
    height: 100%;
    width: 100%;
    font-size: 1rem;
  }

  body {
    background: #FFFFFF;
  }

  .main-content {
    position: relative;
  }

  .hero-content {
    position: absolute;
    flex-shrink: 0;
    max-width: 100%;
    height: auto;
    top: 40%;
    transform: scaleY(-1);
    transform: rotate(180deg) scale(-1.5, 1);
    z-index: -1;
  }

  /* login-main */
  .login-main {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 80vh;
    position: relative;
  }

  .login-container {
    display: flex;
    flex-direction: column-reverse;
    /* flex-wrap: wrap; */
    justify-content: center;
    align-items: center;
    gap: 36px;
    /* height: 80vh; */
    width: 80%;
    margin: auto;
  }

  .service-container {
    width: 400px;
    height: 598px;
    height: auto;
    padding-bottom: 2rem;
    flex-shrink: 0;
    border-radius: 20px;
    background: #FFF;
    box-shadow: 0px 4px 4px 0px rgba(0, 0, 0, 0.25);
    color: #2D2B3A;
    font-family: Roboto;
    font-size: 18px;
    font-style: normal;
    font-weight: 400;
    line-height: 152%;
  }

  .service-title {
    width: inherit;
    height: 110px;
    padding-top: 20px;
    padding-left: 20px;
    padding-right: 20px;
    border-radius: 20px 20px 0px 0px;
    background: #2D2B3A;
  }

  .service-title .try-text {
    color: var(--Theme-Primary-200, #A6DFF2);
    font-family: 'Roboto';
    font-size: 18px;
    font-style: normal;
    font-weight: 500;
    line-height: 150%; /* 27px */
    text-transform: uppercase;
  }

  .service-title .connect-text {
    color: #F1F0F4;
    font-family: 'Roboto';
    font-size: 23px;
    font-style: normal;
    font-weight: 500;
    line-height: 150%;
  }

  .service-session {
    font-size: 1rem;
    padding-top: 20px;
    padding-left: 20px;
    padding-right: 20px;
  }

  .service-form {
    padding-top: 20px;
    padding-left: 20px;
    padding-right: 20px;

  }

  .service-form form {
    box-shadow: none;
  }

  .form-item {
    display: flex;
    flex-direction: column;
    padding-bottom: 1rem;
  }

  .form-label {
    width: 100%;
    color: var(--Theme-Gray-800, #2D2B3A);
    text-align: left;
    font-family: Rubik;
    font-size: 22px;
    font-style: normal;
    font-weight: 500;
    line-height: 150%;
    /* 33px */
  }

  .form-input {
    text-align: left;
    font-family: Roboto;
    font-size: 18px;
    font-style: normal;
    font-weight: 400;
    line-height: 150%;
    padding-left: 0.5rem;
    border: none;
    border-radius: 2px;
    background: #F1F0F4;
    box-shadow: 0px 4px 4px 0px rgba(0, 0, 0, 0.25);
  }

  .form-button {
    color: #61ABC5;
    text-align: center;
    margin-top: 10px;

    /* Regular/Large */
    font-family: Roboto;
    font-size: 18px;
    font-style: normal;
    font-weight: 400;
    line-height: 150%;
    /* 27px */
    border-radius: 0px 2px 2px 0px;
    border: 3px solid #79CFEC;
    background: #FFF;
    cursor: pointer;
    width: 150px;
    align-self: center;
    /* Toggle Shadow */
    box-shadow: 0px 4px 10px 0px rgba(0, 0, 0, 0.10);
  }

  .form-list {
    padding-top: 20px;
    padding-left: 20px;
    padding-right: 20px;
    color: #892626;
    font-family: Roboto;
    font-size: 0.8rem;
    font-style: italic;
    font-weight: 300;
    line-height: 152%;
    /* 27.36px */
  }

  .service-text {
    color: var(--Theme-Gray-800, #2D2B3A);
    font-family: 'Roboto';
    font-size: 38px;
    font-style: normal;
    font-weight: 462;
    line-height: 139%;
  }

  /* Footer styling */
  #login-footer {
    text-align: center;
    margin-top: 20px;
    padding: 15px;
    background-color: #333;
    /* Dark footer background */
    color: #fff;

    a {
      color: #007BFF;
      /* Link color */
      text-decoration: none;
    }

    a:hover {
      text-decoration: underline;
    }
  }

  footer {
    background-color: #17161D;
    border-top: 1px solid silver;
    padding: 10px;
    bottom: 0;
    position: fixed;
    width: 100%;
  }

  footer,
  footer a {
    margin: 0 auto 0 auto;
    text-align: center;
    color: #ffffff;
    text-decoration: none;
  }

  .footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    align-content: center;
  }

  .footer .footer-icon {
    height: 2rem;
    width: auto;
  }

  /* Wide Screen */
  @media screen and (min-width: 1020px) {
    .login-container {
      display: flex;
      flex-wrap: nowrap;
      flex-direction: row;
      width: 70%;
      margin: 0% auto;
      gap: 95px;
    }

    .service-text {
      font-family: Rubik;
      font-size: 2rem;
      font-weight: 462;
      line-height: 88.96px;
      text-align: center;

      color: var(--Theme-Gray-800, #2D2B3A);
      font-family: Rubik;
      font-size: 55px;
      font-style: normal;
      font-weight: 462;
      line-height: 139%;
    }
  }
</style>
{% endblock %}

{% block script %}
<script>
  // TODO: Add footer copyright year
  window.onload = function () {
    // This script runs after the full page (including images, CSS) has loaded
    // Get the current year
    const currentYear = new Date().getFullYear();

    // Insert the current year into the element with the ID 'year'
    const yearElement = document.getElementById('year');
    yearElement.textContent = currentYear;
  };
</script>
{{ super() }}
<script>
  if (window.location.protocol === "http:") {
    // unhide http warning
    var warning = document.getElementById('insecure-login-warning');
    warning.className = warning?.className?.replace(/\bhidden\b/, '');
  }

  // setup onSubmit feedback
  $('form').submit((e) => {
    var form = $(e.target);
    form.find('.feedback-container>input').attr('disabled', true);
    form.find('.feedback-container>*').toggleClass('hidden');
    form.find('.feedback-widget>*').toggleClass('fa-pulse');
  });
</script>
{% endblock %}